<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
  <link rel="stylesheet" href="/frontend/assets/css/style.css">
  <title>Document</title>
</head>

<body>
  <header class=" p-3 position-sticky">
    <nav class="navbar navbar-expand-lg ">
      <div class="nav-afric container-fluid ">
        <a class="navbar-brand" href="index.html">
          <img src="/image 40/1.png" alt="" width="150">
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
          aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse " id="navbarSupportedContent" style="flex-grow: 0;">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0 g-4">
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href="/frontend/index.html">Acceuil</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/frontend/pages/restaurants.html">restaurant</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/frontend/pages/login.html">mon profil</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/frontend/pages/login.html">s'incrire avec google</a>
            </li>

          </ul>

        </div>
      </div>
    </nav>
  </header>
  <video class="video-background-login" autoplay muted loop playsinline>
    <source src="/frontend/assets/images/vid afric 2.mp4" type="video/mp4">
    Ton navigateur ne supporte pas les vid√©os HTML5.
  </video>

  <div class="container mt-4">

    <!-- Page Inscription -->
    <div id="page-inscription" class="container mt-5">
      <div class="container" style="justify-content: center; display: flex;"><img src="/image 40/1.png" alt=""
          width="300" class="" style="object-fit: cover;"></div>

      <form id="form-inscription" class="card p-4 card-custom">
        <div class="mb-3">


          <div class="d-flex justify-content-between">
            <button type="button" class="btn btn-light w-100 me-2" onclick="connexion()">
              <i class="bi bi-google text-warning me-2"></i> Google
            </button>


            <!-- Page Inscription -->
            <div id="page-inscription" class="container mt-5">
              <div class="container" style="justify-content: center; display: flex;"><img src="/image 40/1.png" alt=""
                  width="300" class="" style="object-fit: cover;"></div>

              <form id="form-inscription" class="card p-4 card-custom">
                <div class="mb-3">
                  <label for="email" class="form-label text-white">Adresse Email</label>
                  <input type="email" class="form-control" id="email" required>
                </div>
                <div class="mb-2">
                  <label for="password" class="form-label text-white">Mot de passe</label>
                  <input type="password" class="form-control" id="password" required>
                </div>
                <div class="text-end mb-3">
                  <a href="#" class="text-decoration-none text-white-50" style="font-size: 0.9em;">Mot de passe oubli√©
                    ?</a>
                </div>
                <button type="submit" class="btn btn-green w-100 mb-3">Se connecter</button>

                <div class="text-center mb-2 text-white-50">Ou continuer avec</div>

                <div class="d-flex justify-content-between">
                  <button type="button" class="btn btn-light w-100 me-2">
                    <i class="bi bi-google text-danger me-2"></i> Google
                  </button>
                  <button type="button" class="btn btn-primary w-100 ms-2">
                    <i class="bi bi-facebook me-2"></i> Facebook
                  </button>
                </div>
              </form>

            </div>


            <!-- Conditions 1 -->
            <div id="page-conditions-1" class="hidden">
              <div class="container" style="justify-content: center; display: flex;"><img src="/image 40/1.png" alt=""
                  width="280" class="" style="object-fit: cover;"></div>
              <div class="card card-custom text-white text-center">
                <div class="container mb-3" style="justify-content: center; display: flex;"><img src="/image 40/3.png"
                    alt="" width="400" class="" style="object-fit: cover;background-position-x: right;"></div>
                <h4 class="text-white">find your comfort <br> Food here</h4>
                <p>Veuillez lire et accepter les conditions pour continuer.</p>
                <button class="btn btn-green w-100" onclick="allerAuxConditions2()">Next</button>

                <!-- Page Loading -->
                <div id="page-loading" class="text-center hidden ">
                  <div class="container" style="justify-content: center; display: flex;"><img src="/image 40/1.png"
                      alt="" width="280" class="" style="object-fit: cover;"></div>
                  <h5 style="color: #f68712;">Chargement en cours...</h5>
                  <div class="spinner-border text-warning mb-3 mt-5" role="status"></div>

                </div>

                <!-- Conditions 1 -->
                <div id="page-conditions-1" class="hidden">
                  <div class="container" style="justify-content: center; display: flex;"><img src="/image 40/1.png"
                      alt="" width="280" class="" style="object-fit: cover;"></div>
                  <div class="card card-custom text-white text-center">
                    <div class="container mb-3" style="justify-content: center; display: flex;"><img
                        src="/image 40/3.png" alt="" width="400" class=""
                        style="object-fit: cover;background-position-x: right;"></div>
                    <h4>Tu peux maintenant commander <br> Nos restaurants</h4>
                    <p>Veuillez lire et accepter les conditions pour continuer.</p>
                    <button class="btn btn-green w-100" onclick="allerAuxConditions2()">Next</button>
                  </div>
                </div>

                <!-- Conditions 2 -->
                <div id="page-conditions-2" class="hidden text-white">
                  <div class="container" style="justify-content: center; display: flex;"><img src="/image 40/1.png"
                      alt="" width="280" class="" style="object-fit: cover;"></div>
                  <div class="card card-custom text-white text-center">
                    <div class="container mb-3 mt-5" style="justify-content: center; display: flex;"><img
                        src="/image 40/4 .png" alt="" width="300" class=""></div>
                    <h4>Confirmation finale</h4>
                    <p>Merci de confirmer que vous acceptez nos conditions.</p>
                    <button class="btn btn-green w-100" onclick="terminerInscription()">Next</button>
                  </div>
                </div>

                <!-- Page Food -->
                <div id="page-food" class="hidden">
                  <div class="card-custom">
                    <img src="https://images.unsplash.com/photo-1559628233-611b5f88e0c4" class="img-fluid rounded"
                      alt="Cake">
                    <div class="mt-3">
                      <span class="badge bg-success">Popular</span>
                      <h4 class="mt-2">Rainbow Sandwich<br>Sugarless</h4>
                      <p class="text-muted">4.8 <i class="bi bi-star-fill text-warning"></i> | 2000+ Order</p>
                      <p>Strawberry, Cream, Cheese</p>
                      <button class="btn btn-green w-100">Add To Cart</button>
                    </div>
                  </div>
                </div>

                <!-- Page Profile -->
                <div id="page-profile" class="hidden">
                  <div class="profile-header position-relative">
                    <span class="badge bg-warning text-dark mb-2">Member Gold</span>
                    <a href="#" class="position-absolute top-0 end-0 p-3 text-white"><i
                        class="bi bi-pencil-square"></i></a>
                    <div class="d-flex align-items-center">
                      <img src="https://randomuser.me/api/portraits/men/76.jpg" class="rounded-circle me-3" width="70"
                        height="70">
                      <div>
                        <h5 class="mb-0">Anam Wusono</h5>
                        <p class="text-muted mb-0 small">anamwp66@gmail.com</p>
                      </div>
                    </div>
                    <div class="voucher-box mt-3">
                      <p class="m-0">üéÅ You Have 3 Voucher</p>
                    </div>
                  </div>

                  <div>
                    <h6>Favorite</h6>

                    <!-- Favoris (3 blocs) -->
                    <div class="favorite-card d-flex justify-content-between align-items-center">
                      <div class="d-flex align-items-center">
                        <img src="https://images.unsplash.com/photo-1613145993483-7b38dc2fcaa4" width="60" height="60"
                          class="rounded me-3" style="object-fit: cover;">
                        <div>
                          <p class="mb-0 fw-semibold">Spacy fresh crab</p>
                          <small class="text-muted">Waroenk kita</small>
                        </div>
                      </div>
                      <div class="text-end">
                        <strong>$35</strong><br>
                        <button class="btn btn-green btn-sm mt-1">Buy Again</button>
                      </div>
                    </div>
                    <!-- R√©p√®te selon besoin -->
                  </div>
                </div>
              </div>

              <!-- Navigation bas -->
              <div class="bottom-nav hidden" id="nav-bottom">
                <i class="bi bi-house active-icon" onclick="showPage('food', this)"></i>
                <i class="bi bi-heart" onclick="alert('Favorites not implemented')"></i>
                <i class="bi bi-person" onclick="showPage('profile', this)"></i>
              </div>

              <!-- Script -->
              <script>
                const pageInscription = document.getElementById('page-inscription');
                const pageLoading = document.getElementById('page-loading');
                const pageConditions1 = document.getElementById('page-conditions-1');
                const pageConditions2 = document.getElementById('page-conditions-2');
                const pageFood = document.getElementById('page-food');
                const pageProfile = document.getElementById('page-profile');
                const navBottom = document.getElementById('nav-bottom');

                // Formulaire
                document.getElementById('form-inscription').addEventListener('submit', function (e) {
                  e.preventDefault();
                  pageInscription.classList.add('hidden');
                  pageLoading.classList.remove('hidden');

                  setTimeout(() => {
                    pageLoading.classList.add('hidden');
                    pageConditions1.classList.remove('hidden');
                  }, 2000);
                });

                function allerAuxConditions2() {
                  pageConditions1.classList.add('hidden');
                  pageConditions2.classList.remove('hidden');
                }

                function terminerInscription() {
                  pageConditions2.classList.add('hidden');
                  pageFood.classList.remove('hidden');
                  navBottom.classList.remove('hidden');
                }


                el.classList.add('active-icon');

              </script>
              <script src=""></script>
              <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
              <script type="module">
                import { initializeApp } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-app.js";
                import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-firestore.js";
                import { getAnalytics } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-analytics.js";
                import { getAuth, signInWithPopup, GoogleAuthProvider } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-auth.js";

                // Config Firebase
                const firebaseConfig = {
                  apiKey: "AIzaSyChAbAMdoqTCyyzZYKf7dcV6KGp0FANVk0",
                  authDomain: "ninja-test-dc150.firebaseapp.com",
                  projectId: "ninja-test-dc150",
                  storageBucket: "ninja-test-dc150.appspot.com", // ‚úÖ correction ici : "firebasestorage.app" -> "appspot.com"
                  messagingSenderId: "845687913271",
                  appId: "1:845687913271:web:8dcad1dceb0548635438b2",
                  measurementId: "G-L2BR0HJ3HZ"
                };

                // Initialisation Firebase
                const app = initializeApp(firebaseConfig);
                //   const analytics = getAnalytics(app);
                const db = getFirestore(app);

                window.connexion = function () {
                  const auth = getAuth();
                  const provider = new GoogleAuthProvider();

                  signInWithPopup(auth, provider)
                    .then((result) => {
                      const user = result.user;

                      // Stocker une info dans localStorage pour la session
                      localStorage.setItem('kayagn_user', JSON.stringify({
                        uid: user.uid,
                        name: user.displayName,
                        email: user.email
                      }));

                      // Rediriger vers la page d'accueil
                      window.location.href = "settings.html.html";
                    })
                    .catch((error) => {
                      console.error("Erreur de connexion :", error);
                      alert("Erreur de connexion Google.");
                    });
                }

                // // Fonction async pour ajouter un document
                //   async function addCity() {
                //     try {
                //       const docRef = await addDoc(collection(db, "ville"), {
                //         name: "Dakar",
                //         country: "Senegal"
                //       });
                //       console.log("Document written with ID: ", docRef.id);
                //     } catch (e) {
                //       console.error("Error adding document: ", e);
                //     }
                //   }

                //   addCity(); // Appel de la fonction
              </script>

              // Navigation bas
              function showPage(page, el) {
              pageFood.classList.add('hidden');
              pageProfile.classList.add('hidden');
              document.querySelectorAll('.bottom-nav i').forEach(icon => icon.classList.remove('active-icon'));

              if (page === 'food') {
              pageFood.classList.remove('hidden');
              } else if (page === 'profile') {
              pageProfile.classList.remove('hidden');
              }

              el.classList.add('active-icon');
              }
              </script>

              <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

</body>

</html>